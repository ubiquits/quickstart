sudo: required
dist: trusty
language: node_js
node_js:
- 6.2.0
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    - google-chrome
    packages:
    - g++-4.8
    - google-chrome-stable
cache:
  directories:
  - node_modules
branches:
  except:
  - "/^v[0-9\\.]+/"
before_install:
- openssl aes-256-cbc -K $encrypted_92b08e8fae7c_key -iv $encrypted_92b08e8fae7c_iv -in .travis/deployment_key.pem.enc -out .travis/deployment_key.pem -d
- npm install -g pr-bumper
- pr-bumper check
- cp .env.example .env
- sudo apt-get update
#- sudo apt-get install -y libappindicator1 fonts-liberation
#- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
#- sudo dpkg -i google-chrome*.deb
- export CHROME_BIN=/usr/bin/google-chrome
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
install:
- travis_retry npm install
script:
- npm test
- npm run build
after_success:
- npm run coveralls
- eval "$(ssh-agent -s)" #start the ssh agent
- chmod 600 .travis/deployment_key.pem
- ssh-add .travis/deployment_key.pem
before_deploy:
- pr-bumper bump
- u doc:build
env:
  global:
  # pr-bumper-GITHUB_TOKEN-ubiquits/ubiquits
  - secure: WeZNXT3vUR5B0eoYKnaMVV0ORHATzNkAV9+ZESCOumXHZlbBH/9lLNsTSFh2wPxWwZZXtYRo5knEV6o9sj1vQqWLua2EJN6Fxt6axEjm2Q0zhhhRsyH2OlBKF86cvdwUq97xmVJ1x2jUZkfSTXNjf9CIBmnjTLF/+PoytLAanD4Sz4loKaUKHzxpZHhQ28RmwdivmOx1sIMDWdfHw1UvFduSrSPELqg7ZaB8a0CX+jJ8WNjm4i1uqEWCS2G/0ezPVrYsFbxZ7eTl3zQ+ebIMP7vnE1qGzmS5ArFF9LaRMpIQgkMjY1IrMsuK1P/vYM68glqUnvn76FmobEMJ6ivXWDLiveekM8IkFCMs7vhnWv70k0bqlZG/1L1VJdj/a4dKqPhEsjv/78TzLLzvTj5h3da4Oo4dUlCdOtGRGR+GGKXUXTJS6n63h2d/C+cU31cDQC4yBaOF6dvJ/ICu/DnpHDGROjXhEBzfRBrqM+zCrJc4naJrAFIr7RsTBtnu6TJVoZY3h8y1HWIRT3fusP8Hzfb7wH2VbUZfN3Rxb2uK8R8ZCF4i7RxF+FTqBQAvbY909uLKg5Uf7EXhQxnlzJ/QTeH5wyJEVeh7ObpIsr9rRhzzYh1pZyHBhCUHb5R+aP2XqqsiCuM1JyB2zkfE2ws6OrlWjwm1O8YPSyS/Q/9pxcI=
deploy:
  provider: npm
  email: zak@ubiquits.com
  skip_cleanup: true
  api_key:
    secure: c38j5fUA5OZCR1JMUypn24Gs4xggwiK0JrjWkWZRSsVC46jVPeS0OOWsz5ujnY7iYsjeO3aL73Coa/lujZZJNgHb56tMUUk8KpEzbmtSobRIEWiUl6M9x01GB4p65Ir+5+o8bIoo/r5yNRbr5NfPD67rPO3YgrG5KfWUN0uxE2giBdZaozouIb3MfDicF/TJFCW/GafV1vMI7YTliyw7b7f17YzKrdpqUm+M2zpRHDe0x1E/mKUDyFDcIOeCH/P5wEV8cf4ZnmKD93110wE1Ur9vPDS6kFCqTylgeaOCMP7fvWWoOe7RnQ16gecQa0dHrrdBxrSZnyJ7fByBgFXxLDbqaJ776OV9OSFagTgyyrtrw9ioCS9W6oos6Wr2KFJYC2Ib9VEDdFtMub5Jjn6+f1rw4rexnfWOlav6/ITVUptpM27BrfnXiASHIK5rzwLcmmx1l333PJgcM7mPDEyDVeb9IbeZV4f9qMVuJhdJQ7aJuPuo9H+ePi0B4zBBFr3ULeif7mYBuuqgeB/2j0If3JGzCgUWM9V7KrbOaC9TVA+0Q/VvT9aPArSKxz/30ZGG/wYuT3XkvrECRugp91Vg1XRqjPZraL8pf91RIb+2AnqZs5UKwBE8/mwSwNMrby6FQPZ5+CAEt33ujFeSOaVoaMKwnvlWAs2olwOpsafSCug=
  on:
    branch: master
    tags: false
